<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

    <script>

      $(document).ready(function(){
        var $body = $('body');
        //$body.html('');

        // Header
        var $header = $("<header></header>");
              $header.appendTo($body);

        var $title = $("<h1 class='title'></h1>");
              $title.html("Welcome to Twittler");
              $title.appendTo($header);


        // Section
        var $section = $("<section class = 'tweetList'></section>");
            $section.appendTo($body);

        var $ul = $("<ul class = 'userTweets'></ul>");
            $ul.appendTo($header);
        var $li = $("<li></li>");
            $li.appendTo($ul);



        function displayTweet(index){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');

          // Add <p> element and its class
          $tweet.par = function(text,className){
            var p = $("<p>"+text+"</p>");
            if (arguments.length>1){
                p.addClass(className);
            }
            this.append(p);
          };

          $tweet.par('@' + tweet.user + ': ' + tweet.message,"tweetText");
          $tweet.par(tweet.created_at,"dateTime");


          $tweet.addClass("tweetBox");
          $tweet.prependTo($section);


          $tweet.on('click',function(){
              $li.remove();
              $li = $("<li></li>");
              $li.appendTo($ul);

              var $tweetItem;
              streams.users[tweet.user].forEach(function(item){
                $tweetItem = $("<p>"+item.message+"</p>");
                $tweetItem.appendTo($li);
              })
              $li.slideDown();
          });

          setTimeout(function(){displayTweet(index + 1);}, 1500);
        };


        displayTweet(0);
        // $("div").on('click',function(){
        //     var $tweetItem;
        //     streams.users["mracus"].forEach(function(item){
        //       $tweetItem = $("<p>"+item.message+"</p>");
        //       $tweetItem.appendTo($li);
        //     })
        //     $li.show();
        // });


      });

    </script>
  </body>
</html>
